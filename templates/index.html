<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>jQuery File Upload Example</title>
<link rel="stylesheet" href="../static/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="../static/css/main.css">
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s=" crossorigin="anonymous"></script>
</head>
<body>
    <nav class="navbar navbar-default">
    <div class="container-fluid">
        <div class="navbar-header">
            <a class="navbar-brand" href="#">
                Notes Parser
            </a>
        </div>
    </div>
    </nav>
    <section class="main">
     <div class="container">
        <div class="row">
            {% if text %}
                <div class="col-lg-3">
                    <div class="info">
                        <div class="title-val"></div>
                        <div class="desc-val"></div>
                    </div> 
                </div>
                <div class="col-lg-9">
                    <div class="textarea">{{ text }}</div>
                    <script>var entities = {{ entities | tojson | safe}}</script>
                    <script>
                            entities = $.parseJSON(entities);
                            var txt = $(".textarea").html();
                            var obj_keys = Object.keys(entities);
                            for(var key in obj_keys) {
                                var val = entities[obj_keys[key]];
                                txt = txt.replace(obj_keys[key], "<a href='#' class='highlight' data-key="+obj_keys[key].replace(" ", "=")+">"+obj_keys[key]+"</a>");
                            } 
                            $(".textarea").html(txt);
                    </script>
                    <script>
                        $(".highlight").on("click", function(e) {
                            e.preventDefault();
                            var obj_keys = Object.keys(entities);
                            var data_key = $(this).data('key').replace("=", " ");
                            for(var key in obj_keys) {
                                if(obj_keys[key] == data_key) {
                                    $(".info").show();
                                    $('.title-val').html(entities[obj_keys[key]]['title']);
                                    $('.desc-val').html(entities[obj_keys[key]]['abstract']);
                                    break;
                                }
                            }
                        });
                    </script>
                </div>
            {% else %}
                <form action="upload/" method="post" enctype="multipart/form-data">
                    <input class="upload" type="file" name="file"><br /><br />
                    <div class="submit-upload"><input  class="btn btn-primary" type="submit" value="Upload"></div>
                </form>
            {% endif %}
        </div>
    </div>
    </section>
       
   </body> 
</html>
<!--
<html>
    <head>
    <meta content="width=device-width, initial-scale=1, maximum-scale=1" name="viewport"></meta>
       <script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s=" crossorigin="anonymous"></script>
       <script src="https://code.jquery.com/ui/1.12.0/jquery-ui.min.js"></script>
       <script src="../static/js/iframe-transport.js"></script>
       <script src="../static/js/fileupload.js"></script>
    </head>
    <body>
        <div id="content">
            <button class="fetchData"></button>
       </div>
        <script src="../static/js/index.js" type="text/javascript"></script>
    </body>
</html>
-->
